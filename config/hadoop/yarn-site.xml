<?xml version="1.0"?>

<configuration>
    <property>
        <name>yarn.resourcemanager.address</name>
        <value>RM_HOST:18008</value>
    </property>
    <property>
        <name>yarn.resourcemanager.scheduler.address</name>
        <value>RM_HOST:18009</value>
    </property>
    <property>
        <name>yarn.resourcemanager.resource-tracker.address</name>
        <value>RM_HOST:18010</value>
    </property>
    <property>
        <name>yarn.resourcemanager.admin.address</name>
        <value>RM_HOST:18011</value>
    </property>
    <property>
        <name>yarn.resourcemanager.webapp.address</name>
        <value>RM_HOST:18012</value>
    </property>
    <property>
        <name>yarn.resourcemanager.scheduler.class</name>
        <value>org.apache.hadoop.yarn.server.resourcemanager.scheduler.fair.FairScheduler</value>
        <description>常用类：CapacityScheduler、FairScheduler、orFifoScheduler</description>
    </property>
    <property>
        <name>yarn.scheduler.minimum</name>
        <value>100</value>
        <description>单位：MB</description>
    </property>
    <property>
        <name>yarn.scheduler.maximum</name>
        <value>512</value>
        <description>单位：MB</description>
    </property>

    <!-- nodemanager -->
    <property>
        <name>yarn.nodemanager.resource.memory-mb</name>
        <value>NM_WORKER_MEMORY</value>
        <description>单位为MB</description>
    </property>
    <property>
        <name>yarn.nodemanager.resource.cpu-vcores</name>
        <value>NM_WORKER_CORES</value>
        <description>虚拟核数</description>
    </property>
    <property>
        <name>yarn.nodemanager.vmem-pmem-ratio</name>
        <value>90</value>
        <description>百分比</description>
    </property>
    <property>
        <name>yarn.nodemanager.local-dirs</name>
        <value>NM_LOCAL_DIRS</value>
        <description>列表用逗号分隔</description>
    </property>
    <property>
        <name>yarn.nodemanager.log-dirs</name>
        <value>NM_LOG_DIRS</value>
        <description>列表用逗号分隔</description>
    </property>
    <property>
        <name>yarn.nodemanager.log.retain-seconds</name>
        <value>10800</value>
        <description>单位为S</description>
    </property>
    <property>
        <name>yarn.nodemanager.aux-services</name>
        <value>spark_shuffle,mapreduce_shuffle</value>
        <description>Shuffle service 需要加以设置的MapReduce的应用程序服务</description>
    </property>

    <property>
        <name>yarn.nodemanager.address</name>
        <value>NM_HOST:18015</value>
    </property>
    
    <property>
        <name>yarn.nodemanager.localizer.address</name>
        <value>NM_HOST:18013</value>
    </property>

    <property>
        <name>yarn.nodemanager.webapp.address</name>
        <value>NM_HOST:18014</value>
    </property>

    <property> 
        <name>yarn.app.mapreduce.am.resource.cpu-vcores</name> 
        <value>1</value> 
    </property> 
    <property> 
        <name>yarn.app.mapreduce.am.resource.mb</name> 
        <value>8000</value> 
        <discription>ApplicationMaster的占用的内存大小</discription> 
    </property> 

    <property> 
        <name>yarn.scheduler.maximum-allocation-mb</name> 
        <value>32768</value>
        <discription>单个任务可申请最大内存，默认8192MB</discription> 
    </property> 
    <property> 
        <name>yarn.scheduler.maximum-allocation-vcores</name> 
        <value>8</value>
        <discription>单个任务可申请的最多虚拟CPU个数</discription> 
    </property> 
    <property> 
    <name>yarn.scheduler.minimum-allocation-vcores</name> 
        <value>1</value> 
        <discription>单个任务可申请的最小虚拟CPU个数</discription> 
    </property> 
    <property> 
        <name>yarn.scheduler.minimum-allocation-mb</name> 
        <value>256</value>
        <discription>container最小可申请的内存</discription> 
    </property>
    <!--Log aggregation enable-->
    <property>
        <name>yarn.log-aggregation-enable</name>
        <value>true</value>
    </property>
    <property>
        <name>yarn.nodemanager.log-aggregation.roll-monitoring-interval-seconds</name>
        <value>3600</value>
    </property>
    <property>
        <name>yarn.nodemanager.remote-app-log-dir</name>
        <value>/tmp/logs</value>
    </property>
    <property>
        <name>yarn.log-aggregation.retain-seconds</name>
        <value>604800</value>
    </property>
    <property> 
        <name>yarn.log.server.url</name> 
        <value>http://JBS_HOST:18017/jobhistory/logs/</value> 
    </property>
</configuration>
